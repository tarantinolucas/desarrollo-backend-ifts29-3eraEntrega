doctype html
html(lang='es')
  head
    meta(charset='UTF-8')
    meta(name='viewport', content='width=device-width, initial-scale=1.0')
    title= title
    link(rel='stylesheet', href='https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap')
    link(rel='stylesheet', href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css')
    include partials/layoutStyles.pug
    include partials/headerModule.pug
    
    //- --- ESTILOS UNIFICADOS (COPIADOS DEL DASHBOARD ADMIN) ---
    style.
      /* --- Métricas (Copiado de Admin) --- */
      .top-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 20px;
        margin-top: 24px;
      }
      .metric-card {
        background: linear-gradient(135deg, #ffffff 0%, #f8fbff 100%);
        padding: 24px;
        border-radius: 16px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        border: 1px solid rgba(12,50,80,0.08);
        box-shadow: 0 4px 16px rgba(12,50,80,0.06);
        transition: all 0.3s ease;
      }
      .metric-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 8px 24px rgba(12,50,80,0.12);
      }
      .metric-left { display:flex; gap:16px; align-items:center; }
      .metric-icon {
        width: 56px;
        height: 56px;
        border-radius: 14px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(135deg, rgba(11,117,182,0.12), rgba(15,76,129,0.08));
        color: #0f4c81;
        font-size: 1.5em;
      }
      .metric-title { 
        font-size: 0.88em; 
        color: #6b8ca3; 
        margin: 0 0 6px 0;
        font-weight: 500;
      }
      .metric-number { 
        font-size: 2rem; 
        font-weight: 700; 
        color: #0f4c81; 
        margin: 0;
        line-height: 1;
      }

      /* --- Contenedor Principal (Copiado de Admin) --- */
      .info-card {
        background: white;
        padding: 0;
        border-radius: 16px;
        box-shadow: 0 4px 20px rgba(12,50,80,0.06);
        overflow: hidden;
        margin-top: 32px; /* Añadido para separar de las métricas */
      }
      .info-card-header {
        padding: 20px 24px;
        background: linear-gradient(135deg, #f8fbff 0%, #ffffff 100%);
        border-bottom: 1px solid rgba(12,50,80,0.06);
      }
      .info-card h3 {
        margin: 0;
        font-size: 1.1rem;
        color: #0f4c81;
        display: flex;
        align-items: center;
        gap: 12px;
        font-weight: 600;
      }
      .info-card h3 i { font-size: 1.2em; opacity: 0.8; }

      /* --- Estilos de Lista (Basado en .card de Admin) --- */
      .list-container {
        padding: 24px;
        display: flex;
        flex-direction: column;
        gap: 16px; /* Espacio entre cada tarjeta de turno */
      }
      ul { list-style: none; padding: 0; margin: 0; }
      
      /* Reutilizamos la clase .card del admin para las <li> */
      .card {
        background: linear-gradient(135deg, #ffffff 0%, #fbfdff 100%);
        border-radius: 14px;
        padding: 18px;
        border: 1px solid rgba(10,60,100,0.08);
        box-shadow: 0 2px 12px rgba(12,50,80,0.04);
        display: flex;
        flex-direction: column;
        gap: 12px;
        transition: all 0.3s ease;
      }
      .card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 16px rgba(12,50,80,0.1);
      }
      .card-header {
        display: flex;
        align-items: center;
        gap: 10px;
        color: #0f4c81;
        font-weight: 600;
        padding-bottom: 10px;
        border-bottom: 1px solid rgba(12,50,80,0.06);
      }
      .card-header i { font-size: 1.1em; }
      .card-title { font-size: 0.98rem; margin: 0; }
      
      .card-body { 
        display: flex; 
        flex-direction: column; 
        gap: 8px; 
      }
      .card-body p {
        margin: 0;
        color: #5b7f98;
        display: flex;
        align-items: center;
        gap: 10px;
        font-size: 0.92rem;
      }
      .card-body i { 
        color: #0f4c81; 
        opacity: 0.7; 
        width: 16px; 
      }

      /* --- Estado Vacío (Copiado de Admin) --- */
      .empty-state {
        padding: 40px 24px;
        text-align: center;
        color: #6b8ca3;
      }
      .empty-state i {
        font-size: 3em;
        opacity: 0.3;
        margin-bottom: 16px;
      }
      .empty-state p {
        margin: 0;
        font-size: 1rem;
      }

  body
    include partials/sidebar.pug
    +sidebar(user, 'inicio') // Asegúrate de cambiar 'inicio' por la clave correcta si es otra
    
    .main
      .container
        //- Usamos el mismo mixin de header
        +pageHeader(user, 'Dashboard Médico', 'Mis turnos programados')

        //- Esta sección ahora usará los estilos del admin
        .top-grid
          .metric-card
            .metric-left
              .metric-icon
                i.fas.fa-calendar-check
              .metric-data
                p.metric-title Mis turnos activos
                p.metric-number= metrics.turnos
        
        //- --- ESTRUCTURA DE TARJETA MODIFICADA ---
        //- Usamos .info-card y .info-card-header
        .info-card
          .info-card-header
            h3
              i.fas.fa-stethoscope
              | Próximos Turnos
          
          if turnos && turnos.length
            //- Contenedor para la lista con padding
            .list-container
              ul
                each t in turnos
                  //- Aplicamos la clase .card a cada <li>
                  li.card
                    .card-header
                      i.fas.fa-calendar
                      .card-title #{t.FechaStr} · #{t.HoraInicio} - #{t.HoraFin}
                    .card-body
                      p
                        i.fas.fa-user
                        | Paciente: #{t.Paciente}
                      p
                        i.fas.fa-notes-medical
                        | Especialidad: #{t.Especialidad}
          else
            //- Usamos el .empty-state del admin
            .empty-state
              i.fas.fa-calendar-times
              p No tiene turnos próximos.